describe("match.ip", function()
  local t, ip, matchip
  setup(function()
    t = require "t"
    ip = t.net.ip
    matchip = t.match.ip
  end)
  it("positive", function()
    assert.equal('8.8.8.8', matchip('8.8.8.8'))
    assert.equal('0.0.0.0', matchip('0.0.0.0'))
    assert.equal('255.255.255.255', matchip('255.255.255.255'))
    assert.equal('1.2.3.4', matchip('1.2.3.4 '))
    assert.equal('8.8.8.8', matchip('8.8.8.8 '))
    assert.equal('0.0.0.0', matchip('0.0.0.0 '))
    assert.equal('255.255.255.255', matchip('255.255.255.255 '))
    assert.equal('1.2.3.4', matchip('1.2.3.4 '))

    assert.equal('0.0.0.0', matchip('0.0.0.0/32'))
    assert.equal('1.2.3.4', matchip('1.2.3.4/32'))
    assert.equal('8.8.8.8', matchip('8.8.8.8/32'))
    assert.equal('255.255.255.255', matchip('255.255.255.255/32'))

    assert.equal('8.8.8.8', matchip('8.8.8.8/32 '))
    assert.equal('0.0.0.0', matchip('0.0.0.0/32 '))
    assert.equal('255.255.255.255', matchip(' 255.255.255.255/32'))
    assert.equal('1.2.3.4', matchip(' 1.2.3.4/32'))

    assert.equal('0.0.0.0', matchip('0.0.0.0/255.255.255.255'))
    assert.equal('1.2.3.4', matchip('1.2.3.4/255.255.255.255'))
    assert.equal('8.8.8.8', matchip('8.8.8.8/255.255.255.255'))
    assert.equal('255.255.255.255', matchip('255.255.255.255/255.255.255.255'))
  end)
  it("ip", function()
    assert.equal('8.8.8.8', matchip(ip('8.8.8.8')))
  end)
  it("negative", function()
    assert.is_nil(matchip('8.8.8.8/31'))
    assert.is_nil(matchip('0.0.0.0/'))
    assert.is_nil(matchip('255.255.255.255/333'))
    assert.is_nil(matchip('1.2.3.4/322'))

    assert.is_nil(matchip('-1'))
    assert.is_nil(matchip('255+1'))
    assert.is_nil(matchip('0.0.0.0.0'))
    assert.is_nil(matchip('0.0.0.-1'))
    assert.is_nil(matchip('-1.0.0.0'))
    assert.is_nil(matchip('0.0.0.256'))
    assert.is_nil(matchip('0.0.256.0'))
    assert.is_nil(matchip('0.256.0.0'))
    assert.is_nil(matchip('256.0.0.0'))
    assert.is_nil(matchip('255.255.255.256'))
    assert.is_nil(matchip(true))
    assert.is_nil(matchip(false))
    assert.is_nil(matchip(3))
    assert.is_nil(matchip(0))
    assert.is_nil(matchip({}))
    assert.is_nil(matchip({1}))
    assert.is_nil(matchip({'1.2.3.4'}))
  end)
  it("nil", function()
    assert.is_nil(matchip())
    assert.is_nil(matchip(nil))
  end)
end)